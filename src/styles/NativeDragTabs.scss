// Native Drag and Drop Styles for Tab Rearrangement
// These styles provide visual feedback during drag operations on native DOM elements

.workspace-tab-container {
	position: relative;

	// Dragging state for individual tabs
	.workspace-tab.vt-dragging {
		opacity: 0.5;
		transform: scale(0.95);
		transition: opacity 0.2s ease, transform 0.2s ease;
		cursor: grabbing !important;
		z-index: 1000;

		// Reduce visual noise during drag
		.workspace-tab-header {
			pointer-events: none;
		}
	}

	// Active drag state for the container
	&.vt-drag-active {
		.workspace-tab:not(.vt-dragging) {
			transition: transform 0.2s ease;

			&:hover {
				transform: translateY(-2px);
			}
		}

		// Visual hint that container accepts drops
		&::before {
			content: "";
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			border: 2px dashed var(--interactive-accent);
			border-radius: var(--radius-s);
			opacity: 0.3;
			pointer-events: none;
			z-index: -1;
		}
	}
}

// Drop indicator line
.vt-drop-indicator {
	position: absolute !important;
	left: 0;
	right: 0;
	height: 2px;
	background: linear-gradient(
		90deg,
		transparent 0%,
		var(--interactive-accent) 20%,
		var(--interactive-accent) 80%,
		transparent 100%
	);
	border-radius: 1px;
	z-index: 1000;
	pointer-events: none;

	// Animated pulse effect
	&::before {
		content: "";
		position: absolute;
		top: -1px;
		left: -1px;
		right: -1px;
		bottom: -1px;
		background: var(--interactive-accent);
		border-radius: 2px;
		opacity: 0.6;
		animation: vt-drop-pulse 1s ease-in-out infinite;
	}
}

@keyframes vt-drop-pulse {
	0%,
	100% {
		opacity: 0.3;
		transform: scaleY(1);
	}
	50% {
		opacity: 0.8;
		transform: scaleY(1.5);
	}
}

@keyframes vt-drop-pulse-vertical {
	0%,
	100% {
		opacity: 0.3;
		transform: scaleX(1);
	}
	50% {
		opacity: 0.8;
		transform: scaleX(1.8);
	}
}

// Draggable cursor states
.workspace-tab {
	&[draggable="true"] {
		cursor: grab;

		&:active {
			cursor: grabbing;
		}
	}
}

// Enhanced visual feedback in different themes
body.theme-dark {
	.vt-drop-indicator {
		background: linear-gradient(
			90deg,
			transparent 0%,
			#7c3aed 20%,
			#7c3aed 80%,
			transparent 100%
		);

		&::before {
			background: #7c3aed;
		}
	}
}

body.theme-light {
	.vt-drop-indicator {
		background: linear-gradient(
			90deg,
			transparent 0%,
			#5b21b6 20%,
			#5b21b6 80%,
			transparent 100%
		);

		&::before {
			background: #5b21b6;
		}
	}
}

// Mobile-specific adjustments
@media (max-width: 768px) {
	.vt-drop-indicator {
		height: 3px;

		&::before {
			top: -1.5px;
			bottom: -1.5px;
		}
	}

	.workspace-tab.vt-dragging {
		transform: scale(0.9);
	}
}

// Grid layout specific styles for Mission Control view
.workspace-tabs.vt-mission-control-view {
	.workspace-tab-container {
		// Enhanced drag feedback for grid layout
		&.vt-drag-active {
			.workspace-leaf:not(.vt-dragging) {
				transition: transform 0.3s ease, box-shadow 0.3s ease;

				&:hover {
					transform: scale(1.02);
					box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
				}
			}

			// Grid-specific visual hint
			&::before {
				border-style: solid;
				border-width: 3px;
				border-radius: var(--radius-xl);
				opacity: 0.4;
			}
		}
	}

	// Grid-specific drop indicator (vertical)
	.vt-drop-indicator {
		background: var(--interactive-accent);
		border-radius: 3px;
		box-shadow: 0 0 10px rgba(124, 58, 237, 0.5);

		&::before {
			content: "";
			position: absolute;
			top: -1px;
			left: -1px;
			right: -1px;
			bottom: -1px;
			background: var(--interactive-accent);
			border-radius: 3px;
			box-shadow: 0 0 15px rgba(124, 58, 237, 0.7);
			opacity: 0.6;
			animation: vt-drop-pulse-vertical 1s ease-in-out infinite;
		}
	}

	// Enhanced dragging state for grid items
	.workspace-leaf.vt-dragging {
		transform: scale(0.85) rotate(2deg);
		box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
		z-index: 1001;
		border: 2px solid var(--interactive-accent);
		transition: none; // Disable transitions during drag
	}
}

// Dark theme adjustments for grid layout
body.theme-dark {
	.workspace-tabs.vt-mission-control-view {
		.vt-drop-indicator {
			box-shadow: 0 0 10px rgba(139, 92, 246, 0.6);

			&::before {
				box-shadow: 0 0 15px rgba(139, 92, 246, 0.8);
			}
		}
	}
}

// Light theme adjustments for grid layout
body.theme-light {
	.workspace-tabs.vt-mission-control-view {
		.vt-drop-indicator {
			box-shadow: 0 0 8px rgba(91, 33, 182, 0.4);

			&::before {
				box-shadow: 0 0 12px rgba(91, 33, 182, 0.6);
			}
		}
	}
}
